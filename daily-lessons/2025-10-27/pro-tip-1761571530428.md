 ## Lesson: Automating ADP Onboarding Using Playwright

### Learning Objective

Today, you will master automating the ADP RUN onboarding process using Playwright, focusing on navigating, interacting with, and validating forms within the ADP platform. You will learn how to handle dynamic content, utilize shadow DOM manipulation, and write robust tests using TypeScript.

### Real-World Scenario

Imagine you are an automation architect tasked with streamlining the ADP RUN onboarding process for new employees. Your goal is to automate the creation of new employee profiles from start to finish, including filling out mandatory fields, uploading documents, and verifying successful completion. This automation reduces manual effort, minimizes errors, and ensures a consistent onboarding experience for all new hires.

### Code Implementation

```typescript
import {chromium, expect} from "playwright";

const onboardingURL = "https://www.adp.com/onboarding"; 

const firstNameInput = { selector: "#firstName" };
const lastNameInput = { selector: "#lastName" };
const emailInput = { selector: "#email" };
const passwordInput = { selector: "#password" };
const uploadDocumentButton = { selector: ".upload-document-button" };

const successMessage = "Welcome to ADP!";

async function automateOnboarding(page: chromium.Page) {
  await page.goto(onboardingURL);

  // Fill out mandatory fields
  await page.fill(firstNameInput.selector, "John");
  await page.fill(lastNameInput.selector, "Doe");
  await page.fill(emailInput.selector, "john.doe@example.com");
  await page.fill(passwordInput.selector, "securepassword");

  // Locate and interact with the upload button using shadow DOM
  const uploadButton = await page.$eval(uploadDocumentButton.selector, (el: HTMLButtonElement) => {
      const shadowRoot = el.shadowRoot!; 
      return shadowRoot.querySelector("input[type='file']");
  });
  await uploadButton.uploadFile("path/to/document.pdf");

  // Submit the form
  await page.locator(uploadDocumentButton.selector).click();

  // Verify successful completion
  const successText = await page.locator("h1").innerText();
  expect(successText).toContain(successMessage);
}

async function run() {
  const browser = await chromium.launch();
  const page = await browser.newPage();
  await automateOnboarding(page);
  await browser.close();
}

run();
```

### Step-by-Step Execution

1. **Install Playwright:** `npm install playwright`
2. **Navigate to ADP Onboarding:** Open Terminal and run `npx playwright install chromium`.
3. **Run the Script:** `node your_script_name.js`.

### Pro Tips

*   **Robust Locators:**  Use a combination of selectors (id, class name, text content) and Playwright's  `locator()`  function for reliable element identification, even in dynamic environments.
*   **Implicit Waits:**  Implement `page.waitForSelector()` to ensure elements are present before interacting with them, preventing unexpected errors.
*   **Page Object Model:**  Structure your code using a Page Object Model (POM) for better organization and maintainability.  

### Practice Challenge

1.  **Modify the script:** Extract the form field locators and the upload document interaction logic into separate functions for reusability.
2.  **Implement error handling:** Add checks for error messages or validation failures during the onboarding process and handle them appropriately.

### Next Steps

*   **Explore Shadow DOM in Detail:** Learn advanced Playwright techniques for interacting with nested element structures within shadow DOMs.
*   **Integrate with Cucumber:** Structure your test cases as scenarios and features using Cucumber to create a comprehensive and human-readable test suite.
*   **Automate Various ADP Functions:** Extend your automation capabilities to cover other ADP functionalities like payroll updates, time tracking, and benefits enrollment.



