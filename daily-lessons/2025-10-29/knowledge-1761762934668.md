## Lesson: Automating Employee Onboarding with Playwright & Shadow DOM

**1. Learning Objective**

By the end of this lesson, you'll be able to:

* Understand and navigate the Shadow DOM in Playwright.
* Automate interaction with elements within the Shadow DOM of ADP Onboarding.
* Identify and handle dynamic elements using Playwright's capabilities.

**2. Real-World Scenario**

Imagine you're automating the onboarding process for a new employee within ADP Onboarding. This involves:

* Entering employee details into the system.
* Uploading required documents (resume, ID proof, etc.).
* Selecting benefits packages.
*  Reviewing and confirming onboarding information.

This lesson focuses on interacting with a specific section within the onboarding process where some elements are embedded within a Shadow DOM.

**3. Code Implementation**

```html
<!DOCTYPE html>
<html>
<head>
  <title>Onboarding Example</title>
</head>
<body>
  <div id="onboarding-form">
    <div id="personal-info">
      <h2>Personal Information</h2>
      <label for="name">Full Name:</label>
      <input type="text" id="name" placeholder="Enter Full Name">

      <shadow-root>
        <div class="shadow-container">
          <label for="address">Address:</label>
          <input type="text" id="address" placeholder="Enter Address">
        </div>
      </shadow-root>
    </div>
  </div>
</body>
</html>

```

```typescript
const { chromium } = require('playwright');

async function automateOnboarding() {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  await page.goto('http://localhost:8000/'); // Replace with your actual URL

  // Selecting the input field
  const nameInput = await page.locator("#name");
  await nameInput.fill("John Doe");

  // Accessing and interacting with the Shadow DOM
  const shadowRoot = await page.locator("#personal-info > shadow-root");
  const addressInput = await shadowRoot.locator(".shadow-container #address");
  await addressInput.fill("123 Main St");

  await browser.close();
}

automateOnboarding();  
```

**4. Step-by-Step Execution**

1. **Install Playwright:** `npm install playwright`
2. **Start a local server:** Use a tool like 'http-server' to serve the HTML file.
3. **Run the script:** `node automateOnboarding.ts` 
4. **Observe:** Playwright will open a browser, navigate to the URL, fill in the name and address fields within the Shadow DOM, and close the browser.

**5. Pro Tips**

* **Explicit Waits:** Use `page.waitForSelector` or `page.waitForNavigation` to ensure elements are fully loaded before interacting with them.
* **Shadow DOM Queries:** Utilize shadowRoot.locator to select elements within the Shadow DOM. Leverage Playwright's powerful selector syntax for navigating complex structures.
* **Viewport Dimensions:** Adjust the viewport size to simulate different screen resolutions using `page.setViewportSize` for comprehensive testing.

**6. Practice Challenge**

Implement the code to:

* Upload a sample file (resume) to the onboarding form using Playwright.

**7. Next Steps**

* Explore advanced Playwright features like:
    * Automatic screenshot taking on failure.
    * Customizing reporting.
*  Learn how to integrate Playwright with:
    * APIs (e.g., ADP API) for data validation and interaction.
    * Test management frameworks (e.g., Cucumber) for structured test organization.



