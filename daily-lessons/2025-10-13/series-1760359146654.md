

## Lesson: Automating ADP Onboarding with Playwright and TypeScript

**Learning Objective:**

By the end of this lesson, you'll be able to automate the employee onboarding process within ADP RUN using Playwright, TypeScript, and Cucumber. This includes navigating the onboarding flow, interacting with forms, and handling shadow-DOM elements.

**Real-World Scenario:**

Imagine you need to automate the process of onboarding new employees to ADP RUN. This involves creating a new employee record, filling out their personal information, selecting benefits, and completing the onboarding checklist. Manual execution of these tasks is time-consuming and prone to errors.

**Code Implementation:**

```typescript
import { chromium, expect } from "playwright";

describe('Employee Onboarding', () => {
  let page: Page;

  beforeAll(async () => {
    const browser = await chromium.launch();
    page = await browser.newPage();
    await page.goto('https://www.adp.com/us/resources/payroll/run/'); // Replace with actual ADP RUN URL
  });

  afterAll(async () => {
    await page.close();
    await browser.close();
  });

  it('should successfully onboard a new employee', async () => {
    // Navigate to onboarding section
    await page.click('/* CSS Selector for Onboarding link */'); 
    await page.waitForSelector('/* CSS Selector for "New Employee" button */');
    await page.click('/* CSS Selector for "New Employee" button */');

    // Fill employee information
    await page.type('/* CSS Selector for Employee Name input */', 'John Doe');
    // ... fill other fields like address, date of birth, etc.

    // Handle Shadow DOM for benefits selection
    const benefitsElement = await page.shadowRoot('/* Shadow DOM selector */');
    await benefitsElement.click('/* CSS Selector for "Health Insurance" checkbox */');

    // Complete onboarding checklist
    // ... find and click checkboxes or buttons for other checklist items

    // Verify successful onboarding
    const successMessage = await page.textContent('/* CSS Selector for success message */');
    expect(successMessage).toContain('Welcome John Doe!');
  });
});
```

**Step-by-Step Execution:**

1. **Install Dependencies:** `npm install playwright --save-dev` 
2. **Install Type Definitions:** `npm install @types/playwright --save-dev`
3. **Adapt the CSS Selectors:** Replace the placeholders in the code with the actual CSS selectors for elements on the ADP RUN site. You can use your browser's developer tools to inspect the elements and find their selectors.
4. **Run the Test:** `npx playwright test`

**Pro Tips:**

* **Robust Locators:** Use composite selectors combining multiple attributes to ensure accuracy and robustness against potential element changes.
* **Shadow DOM Handling:** Explore advanced methods like `puppeteer-extra-plugin-shadowdom` for efficient interaction with shadow-DOM elements.
* **Wait Strategies:** Be mindful of loading times. Use appropriate wait strategies like `waitForSelector`, `waitForNavigation`, or custom selectors to avoid errors.
* **Page Object Model:** Consider structuring your code with Page Objects for improved reusability and maintainability, especially for complex applications like ADP RUN.

**Practice Challenge:**

1. Automate the process of logging into ADP RUN using valid credentials.
2. Navigate to the employee list page and verify that the expected number of employees is displayed.
3. Select a specific employee and navigate to their details page to verify their information.

**Next Steps:**

* Explore advanced features of Playwright like:
    * Parallel test execution
    * Screenshot capture
    * Network traffic analysis
* Integrate Cucumber with Playwright for more structured and maintainable automated tests.
* Learn about data-driven testing with Playwright to execute tests with various input sets.



Remember, mastering automation requires practice and perseverance. Start with small, achievable tasks and gradually build your expertise.