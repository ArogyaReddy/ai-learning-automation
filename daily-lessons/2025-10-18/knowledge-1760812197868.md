## Lesson: Automating ADP RUN Onboarding with Playwright &Cucumber

**Learning Objective:** Master navigating and automating the ADP RUN Onboarding flow using Playwright and Cucumber, handling dynamic elements and shadow DOM.

**Real-World Scenario:** 

Our client wants to automate the onboarding process for new hires in ADP RUN. The goal is to simulate a new hire entering their information, selecting company benefits, and completing the onboarding questionnaire.

**Code Implementation (JavaScript/Playwright):**

```javascript
const { chromium } = require('playwright');

async function runOnboarding() {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  await page.goto('https://www.adp.com/resources/run-online/onboarding.aspx');

  // Locate and interact with the "Start Onboarding" button (adjust the selector as needed)

  await page.click('button[type="submit"]');

  // Input new hire information

  await page.fill('input[name="firstName"]', 'John');
  await page.fill('input[name="lastName"]', 'Doe');
  await page.fill('input[name="email"]', 'john.doe@example.com');

  // Select benefits (replace with actual benefit names or selectors)

  await page.click('input[value="Health Insurance"]');
  await page.click('input[value="Dental Insurance"]');

  // Handle dynamic content or shadow DOM (example)
  const onboardingQuestions = await page.querySelectorAll('div.question'); // Adapt the selector
  for (const question of onboardingQuestions) {
    const questionText = await question.innerText();
    console.log(`Question: ${questionText}`);
    // Handle each question based on its content

    await question.click('input[type="radio"][value="Yes"]'); // Example answer 
  }

  // Click "Submit Onboarding" button (adjust the selector accordingly)

  await page.click('button[type="submit"]');

  await browser.close();
}

runOnboarding();
``` 

**Step-by-Step Execution:**

1.  Install Playwright: `npm install playwright`
2.  Install the necessary browser types: `playwright install`
3.  Run the script: `node onboarding.js`

**Pro Tips:**

*   **Robust Locators:** Instead of relying solely on IDs, utilize combinations of selectors (classes, attributes, text content) to ensure your tests are resilient to changes in the page structure. 
*   **Handle Authentication:** Automate login procedures using cookies, API tokens, or Playwright's existing login functionalities.
*   **Data-Driven Testing:** Leverage Cucumber features to parameterize data (like employee details, benefits choices) to run multiple onboarding scenarios efficiently.
*   **Shadow DOM Navigation:** Utilize Playwright's `shadowRoot` APIs to interact with elements within shadow DOM structures. Explore the `parentElement`, `querySelector`, and `querySelectorAll` methods to navigate and interact with elements. 
*   **Error Handling:** Implement robust error handling mechanisms within your Playwright functions to gracefully handle unexpected scenarios and prevent test failures. 

**Practice Challenge:**

1.  Modify the code above to automatically select different benefit options based on predefined configurations.
2.  Identify a specific onboarding question with dynamic content (e.g., a variable based on user input) and implement logic to handle it correctly.

**Next Steps:**

*   **Learn Cucumber Gherkin:** Dive into the world of behavior-driven development (BDD) with Cucumber and learn how to define your automated onboarding scenarios using Gherkin syntax.
*   **Integration with CI/CD:**  Integrate your automated Playwright tests with your CI/CD pipeline for continuous testing and feedback.



