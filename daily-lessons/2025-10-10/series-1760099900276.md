## Automation Lesson: Navigating ADP RUN Onboarding with Playwright

This lesson focuses on automating onboarding workflows within ADP RUN using Playwright, TypeScript, and Cucumber.

**Learning Objective:**

* Master the techniques for navigating ADP RUN Onboarding, handling dynamic elements, and interacting with shadow DOM using Playwright.

**Real-World Scenario:**

Imagine you need to automate the process of onboarding a new employee in ADP RUN. This includes selecting the employee type, entering personal information, uploading documents, and finalizing the onboarding process.

**Code Implementation:**

```typescript
import { chromium } from 'playwright';

async function automateOnboarding() {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  await page.goto('https://www.adp.com/run-onboarding'); // Replace with actual URL

  // Wait for the "Employee Type" selection to be visible
  await page.waitForSelector('#employeeTypeDropdown');

  // Select "Full-Time"
  await page.selectOption('#employeeTypeDropdown', 'Full-Time');

  // Fill out the employee information fields
  await page.fill('#firstName', 'John');
  await page.fill('#lastName', 'Doe');
  // ... fill other fields

  // Handle shadow DOM for document upload
  const uploadButton = await page.locator('shadow-root >> button[type="submit"]'); // Adjust locator as needed
  await uploadButton.click();

  // ... handle document upload logic

  await page.waitForSelector('#onboardingCompleteButton');
  await page.click('#onboardingCompleteButton');

  await browser.close();
}

automateOnboarding();
```

**Step-by-Step Execution:**

1.  **Set up Playwright:** Ensure you have Playwright installed (`npm install playwright`).
2.  **Run the code:** Execute the `node onboarding.ts` (or your filename).

**Pro Tips:**

*   **Element Locators:**

    *   Use the most robust locators like `#id` or `xpath` instead of `css` selectors when possible.
    *   Utilize Playwright's object properties and methods for more reliable interactions with dynamic elements.
    *   Employ `isVisible` and `isEnabled` checks before interacting with elements to ensure they are in the desired state.

*   **Shadow DOM:**

    *   Inspect the target page's DOM using DevTools to identify the shadow root and locate elements within it.
    *   Combine locators like `shadow-root` with standard selectors to target elements inside shadow DOMs.

*   **Error Handling:**

    *   Implement robust error handling mechanisms using `try-catch` blocks and custom error classes to gracefully handle unexpected situations.
    *   Utilize Playwright's built-in assertions for validating elements and data.

*   **Page Interactions:**

    *   Employ `screenshot` and `video` features to capture snapshots or recordings of the automation process for debugging and monitoring.

**Practice Challenge:**

Modify the code to:

*   Upload a document using a file path.
*   Verify a success message is displayed after completing onboarding.
*   Handle potential errors like invalid input or missing files.

**Next Steps:**

*   Explore complex scenarios involving multi-page flows and dynamic content updates.
*   Integrate the automation scripts with your CI/CD pipeline for continuous testing.
*   Research advanced Playwright features like network interception and geolocation manipulation for more sophisticated automation tasks.


